# QR Hotel Service - –°–∏—Å—Ç–µ–º–∞ Room Service –¥–ª—è –æ—Ç–µ–ª—è

–í–µ–±-—Å–µ—Ä–≤–∏—Å –Ω–∞ –±–∞–∑–µ Django –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–ª—É–∂–±—ã Room Service –≤ –æ—Ç–µ–ª–µ.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –î–ª—è –≥–æ—Å—Ç–µ–π:
- üì± Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (mobile-first) –¥–ª—è –≤—ã–±–æ—Ä–∞ –±–ª—é–¥ —á–µ—Ä–µ–∑ QR-–∫–æ–¥
- üõí –ö–æ—Ä–∑–∏–Ω–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- üìã –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –î–ª—è –æ—Ç–µ–ª—è:
- üìä –ö–∞—Å—Ç–æ–º–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ —Å live-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∑–∞–∫–∞–∑–æ–≤
- üè® –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–Ω—ã–º —Ñ–æ–Ω–¥–æ–º –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤
- üçΩÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –±–ª—é–¥–∞, —Å—Ç–æ–ø-–ª–∏—Å—Ç)
- üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞–∫–∞–∑–∞–º –∏ –≤—ã—Ä—É—á–∫–µ
- üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Django 4.2+
- **Frontend**: Tailwind CSS, HTMX, Alpine.js
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL
- **WebSocket**: Django Channels (–¥–ª—è live-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)
- **QR-–∫–æ–¥—ã**: qrcode, segno
- **PDF**: reportlab
- **Telegram**: aiogram

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL:

```sql
CREATE DATABASE qrmenu;
CREATE USER postgres WITH PASSWORD 'postgres';
GRANT ALL PRIVILEGES ON DATABASE qrmenu TO postgres;
```

–ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `qrmenu/settings.py` –ø–æ–¥ –≤–∞—à—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

### 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
python manage.py makemigrations
python manage.py migrate
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
python manage.py createsuperuser
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/botfather)
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –£–∑–Ω–∞–π—Ç–µ ID —á–∞—Ç–∞ (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ [@userinfobot](https://t.me/userinfobot))
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export TELEGRAM_BOT_TOKEN="your_bot_token"
export TELEGRAM_CHAT_ID="your_chat_id"
```

–ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `settings.py` –Ω–∞–ø—Ä—è–º—É—é (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production).

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis (–¥–ª—è WebSocket)

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ Redis:

```bash
# Ubuntu/Debian
sudo apt-get install redis-server
sudo systemctl start redis

# macOS
brew install redis
brew services start redis
```

### 7. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º
python manage.py runserver

# –° –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π WebSocket (–¥–ª—è production)
daphne -b 0.0.0.0 -p 8000 qrmenu.asgi:application
```

## –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–µ–ª—è

1. –ó–∞–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `http://localhost:8000/admin/`
2. –°–æ–∑–¥–∞–π—Ç–µ **–ö–æ—Ä–ø—É—Å** (Building)
3. –°–æ–∑–¥–∞–π—Ç–µ **–≠—Ç–∞–∂–∏** (Floor) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ—Ä–ø—É—Å–∞
4. –°–æ–∑–¥–∞–π—Ç–µ **–ù–æ–º–µ—Ä–∞** (Room) - QR-–∫–æ–¥—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–Ω—é

1. –°–æ–∑–¥–∞–π—Ç–µ **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏** (Category) –±–ª—é–¥
2. –î–æ–±–∞–≤—å—Ç–µ **–ë–ª—é–¥–∞** (Product) –≤ –∫–∞–∂–¥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –±–ª—é–¥

### 3. –î–æ—Å—Ç—É–ø –∫ –¥–∞—à–±–æ—Ä–¥—É

–î–∞—à–±–æ—Ä–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000/dashboard/`

–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å).

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –≥–æ—Å—Ç–µ–π:

1. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –≤ –Ω–æ–º–µ—Ä–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ –±–ª—é–¥–∞ –∏–∑ –º–µ–Ω—é
3. –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
4. –û—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑
5. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞

### –î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤:

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (`/dashboard/`):
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –¥–µ–Ω—å

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞–º–∏** (`/dashboard/rooms/`):
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –Ω–æ–º–µ—Ä–æ–≤
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —Å QR-–∫–æ–¥–∞–º–∏ –¥–ª—è –ø–µ—á–∞—Ç–∏

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é** (`/dashboard/menu/`):
   - –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–ª—é–¥ (—Å—Ç–æ–ø-–ª–∏—Å—Ç)
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –±–ª—é–¥

4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** (`/dashboard/statistics/`):
   - –í—ã—Ä—É—á–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
   - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –±–ª—é–¥–∞
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
qrmenu/
‚îú‚îÄ‚îÄ hotel/              # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # –ú–æ–¥–µ–ª–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # Views –¥–ª—è –≥–æ—Å—Ç–µ–π –∏ –¥–∞—à–±–æ—Ä–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ api_views.py   # API –¥–ª—è Telegram
‚îÇ   ‚îú‚îÄ‚îÄ utils.py       # –£—Ç–∏–ª–∏—Ç—ã (Telegram)
‚îÇ   ‚îú‚îÄ‚îÄ qr_generator.py # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä QR-–∫–æ–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ consumers.py   # WebSocket consumers
‚îú‚îÄ‚îÄ templates/         # –®–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ hotel/        # –®–∞–±–ª–æ–Ω—ã –¥–ª—è –≥–æ—Å—Ç–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ dashboard/     # –®–∞–±–ª–æ–Ω—ã –¥–∞—à–±–æ—Ä–¥–∞
‚îú‚îÄ‚îÄ static/           # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ media/            # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```

## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- **Building** - –ö–æ—Ä–ø—É—Å –æ—Ç–µ–ª—è
- **Floor** - –≠—Ç–∞–∂
- **Room** - –ù–æ–º–µ—Ä (—Å QR-–∫–æ–¥–æ–º)
- **Category** - –ö–∞—Ç–µ–≥–æ—Ä–∏—è –±–ª—é–¥
- **Product** - –ë–ª—é–¥–æ/—Ç–æ–≤–∞—Ä
- **Order** - –ó–∞–∫–∞–∑
- **OrderItem** - –ü–æ–∑–∏—Ü–∏—è –≤ –∑–∞–∫–∞–∑–µ

## API

### Telegram Webhook

`POST /api/telegram/webhook/` - –û–±—Ä–∞–±–æ—Ç–∫–∞ callback –æ—Ç Telegram –±–æ—Ç–∞

### Live Orders

`GET /api/orders/live/` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–º–µ—Ä–∞
- ‚úÖ Live-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ HTMX
- ‚úÖ WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏
- ‚úÖ Mobile-first –¥–∏–∑–∞–π–Ω –¥–ª—è –≥–æ—Å—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —Å QR-–∫–æ–¥–∞–º–∏ –¥–ª—è –ø–µ—á–∞—Ç–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–ø-–ª–∏—Å—Ç–æ–º –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

1. –ú–æ–¥–µ–ª–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ `hotel/models.py`
2. Views - –≤ `hotel/views.py` –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
3. URLs - –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã `*_urls.py`
4. –®–∞–±–ª–æ–Ω—ã - –≤ `templates/`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
python manage.py test
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## –î–µ–ø–ª–æ–π –Ω–∞ Beget —Ö–æ—Å—Ç–∏–Ω–≥

–î–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ Beget —Ö–æ—Å—Ç–∏–Ω–≥ —Å–º. –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
- **DEPLOY_SUMMARY.md** - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∏ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **DEPLOY_INSTRUCTIONS.md** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
- **QUICK_DEPLOY.md** - –±—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:

1. –°–æ–∑–¥–∞–π—Ç–µ –∞—Ä—Ö–∏–≤: `./deploy_manual.sh`
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ SFTP/SCP
3. –†–∞—Å–ø–∞–∫—É–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `setup_server.sh` –≤ Python –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (`ssh localhost -p222`)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ `settings.py`
- –ó–∞–ø—É—â–µ–Ω –ª–∏ Redis (–¥–ª—è WebSocket)
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–æ–≤ Telegram –±–æ—Ç–∞
- –õ–æ–≥–∏ Django –≤ –∫–æ–Ω—Å–æ–ª–∏


